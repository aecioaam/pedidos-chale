<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizzaria Chal√© - Fa√ßa seu Pedido Online</title>
    <style>
        :root {
            --primary: #8B0000;
            --secondary: #D4AF37;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), #6a0000);
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
            display: block;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            color: #777;
        }
        
        .step.active {
            background-color: var(--primary);
            color: white;
        }
        
        .step.completed {
            background-color: var(--success);
            color: white;
        }
        
        .step-section {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .step-section.active {
            display: block;
        }
        
        .section-title {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .size-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .size-option {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .size-option:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }
        
        .size-option.selected {
            border-color: var(--primary);
            background-color: rgba(139, 0, 0, 0.05);
            transform: translateY(-5px);
        }
        
        .size-label {
            font-weight: bold;
            font-size: 1.2rem;
            display: block;
            margin-bottom: 5px;
        }
        
        .size-details {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .price {
            font-weight: bold;
            color: var(--primary);
            font-size: 1.3rem;
        }
        
        .pizza-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .pizza-item {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pizza-item:hover {
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .pizza-item.selected {
            border-color: var(--primary);
            background-color: rgba(139, 0, 0, 0.05);
        }
        
        .pizza-name {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .pizza-ingredients {
            color: #666;
            font-size: 0.9rem;
            height: 60px;
            overflow: hidden;
        }
        
        .pizza-type-selector {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            justify-content: center;
        }
        
        .type-option {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: bold;
        }
        
        .type-option:hover {
            border-color: var(--primary);
        }
        
        .type-option.selected {
            border-color: var(--primary);
            background-color: rgba(139, 0, 0, 0.05);
            color: var(--primary);
        }
        
        .half-pizza-container {
            display: flex;
            margin-top: 20px;
            border: 1px solid #eee;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .half-pizza {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .half-pizza:first-child {
            border-right: 1px dashed #ddd;
        }
        
        .half-pizza.selected {
            background-color: rgba(139, 0, 0, 0.05);
        }
        
        .half-pizza-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .selected-pizza-name {
            font-size: 0.9rem;
            color: #666;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .whole-pizza-container {
            margin-top: 20px;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .whole-pizza-container.selected {
            border-color: var(--primary);
            background-color: rgba(139, 0, 0, 0.05);
        }
        
        .whole-pizza-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .borda-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .borda-option {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .borda-option:hover {
            border-color: var(--secondary);
        }
        
        .borda-option.selected {
            border-color: var(--secondary);
            background-color: rgba(212, 175, 55, 0.1);
        }
        
        .borda-label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }
        
        .borda-price {
            font-weight: bold;
            color: var(--secondary);
        }
        
        .refri-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .refri-option {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .refri-option:hover {
            border-color: #007bff;
        }
        
        .refri-option.selected {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
        }
        
        .no-drink-option {
            background-color: #f8f9fa;
            border-color: #6c757d !important;
        }
        
        .no-drink-option.selected {
            background-color: #e9ecef;
            border-color: #495057 !important;
        }
        
        .refri-label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }
        
        .refri-price {
            font-weight: bold;
            color: #007bff;
        }
        
        .order-summary {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-top: 3px solid var(--primary);
        }
        
        .order-items {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .order-item-details {
            flex: 1;
        }
        
        .order-item-name {
            font-weight: bold;
        }
        
        .order-item-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .order-item-price {
            font-weight: bold;
            color: var(--primary);
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.3rem;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #ddd;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
            text-decoration: none;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #a00000;
        }
        
        .btn-secondary {
            background-color: #6c757d;
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-whatsapp {
            background-color: #25D366;
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .btn-whatsapp:hover {
            background-color: #128C7E;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .pizza-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }
        
        .counter-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .counter-value {
            font-size: 1.2rem;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .textarea-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }
        
        .textarea-control:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .radio-option input {
            margin-right: 8px;
        }
        
        .delivery-fee {
            color: var(--primary);
            font-weight: bold;
            margin-top: 5px;
        }
        
        .hidden {
            display: none;
        }
        
        .current-total {
            background-color: #e9f7ef;
            border: 1px solid #28a745;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .current-total-label {
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .current-total-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .whatsapp-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .whatsapp-modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 25px;
            max-width: 90%;
            max-height: 90%;
            width: 500px;
            text-align: center;
        }
        
        .modal-title {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9rem;
            border-top: 1px solid #dee2e6;
        }

        .selection-hint {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
            font-style: italic;
        }

        .error-message {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .size-options, .borda-options, .refri-options {
                grid-template-columns: 1fr;
            }
            
            .pizza-grid {
                grid-template-columns: 1fr;
            }
            
            .half-pizza-container {
                flex-direction: column;
            }
            
            .half-pizza:first-child {
                border-right: none;
                border-bottom: 1px dashed #ddd;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .pizza-type-selector {
                flex-direction: column;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <span class="logo">üçï</span>
            <h1>Pizzaria Chal√©</h1>
            <p>Fa√ßa seu pedido online</p>
        </div>
    </header>
    
    <div class="container">
        <div class="step-indicator">
            <div class="step active" id="step1">1</div>
            <div class="step" id="step2">2</div>
            <div class="step" id="step3">3</div>
            <div class="step" id="step4">4</div>
            <div class="step" id="step5">5</div>
            <div class="step" id="step6">6</div>
        </div>
        
        <!-- Passo 1: Sele√ß√£o do Tamanho -->
        <div class="step-section active" id="section1">
            <h2 class="section-title">Escolha o Tamanho da Pizza</h2>
            <p>Selecione o tamanho da sua pizza:</p>
            
            <div class="size-options">
                <div class="size-option" data-size="PP" data-price="35.00">
                    <span class="size-label">PP (20cm)</span>
                    <span class="size-details">2 fatias</span>
                    <div class="price">R$ 35,00</div>
                </div>
                <div class="size-option" data-size="M" data-price="60.00">
                    <span class="size-label">M (25cm)</span>
                    <span class="size-details">4 fatias</span>
                    <div class="price">R$ 60,00</div>
                </div>
                <div class="size-option" data-size="G" data-price="70.00">
                    <span class="size-label">G (30cm)</span>
                    <span class="size-details">6 fatias</span>
                    <div class="price">R$ 70,00</div>
                </div>
                <div class="size-option" data-size="GG" data-price="80.00">
                    <span class="size-label">GG (35cm)</span>
                    <span class="size-details">8 fatias</span>
                    <div class="price">R$ 80,00</div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <div></div>
                <button class="btn" id="nextToStep2">Pr√≥ximo</button>
            </div>
        </div>
        
        <!-- Passo 2: Sele√ß√£o dos Sabores -->
        <div class="step-section" id="section2">
            <h2 class="section-title">Escolha os Sabores</h2>
            <p>Selecione os sabores da sua pizza. Voc√™ pode escolher um sabor inteiro ou dois sabores (metade/metade):</p>
            
            <div class="pizza-counter">
                <button class="counter-btn" id="decreasePizza">-</button>
                <span class="counter-value" id="pizzaCount">1</span>
                <button class="counter-btn" id="increasePizza">+</button>
                <span>Pizza(s) no pedido</span>
            </div>
            
            <div id="pizzaSelectionArea">
                <!-- √Årea onde as sele√ß√µes de pizza ser√£o adicionadas dinamicamente -->
            </div>

            <div class="error-message" id="pizzaError">
                Por favor, selecione todos os sabores necess√°rios antes de continuar.
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="backToStep1">Voltar</button>
                <button class="btn" id="nextToStep3">Pr√≥ximo</button>
            </div>
        </div>
        
        <!-- Passo 3: Sele√ß√£o da Borda -->
        <div class="step-section" id="section3">
            <h2 class="section-title">Escolha a Borda</h2>
            <p>Selecione o tipo de borda para sua pizza:</p>
            
            <div class="borda-options" id="bordaOptions">
                <!-- As op√ß√µes de borda ser√£o carregadas dinamicamente conforme o tamanho selecionado -->
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="backToStep2">Voltar</button>
                <button class="btn" id="nextToStep4">Pr√≥ximo</button>
            </div>
        </div>
        
        <!-- Passo 4: Sele√ß√£o de Bebidas -->
        <div class="step-section" id="section4">
            <h2 class="section-title">Deseja Adicionar Bebidas?</h2>
            <p>Selecione as bebidas que deseja incluir no pedido:</p>
            
            <div class="refri-options">
                <div class="refri-option" data-name="Coca-Cola 2L" data-price="15.00">
                    <span class="refri-label">Coca-Cola 2L</span>
                    <div class="refri-price">R$ 15,00</div>
                </div>
                <div class="refri-option" data-name="Coca-Cola Zero 2L" data-price="15.00">
                    <span class="refri-label">Coca-Cola Zero 2L</span>
                    <div class="refri-price">R$ 15,00</div>
                </div>
                <div class="refri-option" data-name="Guaran√° 2L" data-price="15.00">
                    <span class="refri-label">Guaran√° 2L</span>
                    <div class="refri-price">R$ 15,00</div>
                </div>
                <div class="refri-option no-drink-option" data-name="N√£o desejo bebidas" data-price="0.00">
                    <span class="refri-label">N√£o desejo bebidas</span>
                    <div class="refri-price">-</div>
                </div>
            </div>
            
            <div id="refriSelectionArea">
                <!-- √Årea onde as sele√ß√µes de refrigerante ser√£o adicionadas dinamicamente -->
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="backToStep3">Voltar</button>
                <button class="btn" id="nextToStep5">Pr√≥ximo</button>
            </div>
        </div>
        
        <!-- Passo 5: Informa√ß√µes de Entrega/Retirada e Pagamento -->
        <div class="step-section" id="section5">
            <h2 class="section-title">Informa√ß√µes de Entrega e Pagamento</h2>
            
            <div class="current-total">
                <div class="current-total-label">Valor Atual do Pedido:</div>
                <div class="current-total-value" id="currentTotalValue">R$ 0,00</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Nome:</label>
                <input type="text" class="form-control" id="customerName" placeholder="Seu nome completo">
            </div>
            
            <div class="form-group">
                <label class="form-label">Tipo de Pedido:</label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="orderType" value="retirada" checked>
                        Retirada no Local
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="orderType" value="entrega">
                        Entrega (+ R$ 5,00)
                    </label>
                </div>
                <div class="delivery-fee hidden" id="deliveryFeeNote">Taxa de entrega: R$ 5,00</div>
            </div>
            
            <div class="form-group hidden" id="deliveryAddressGroup">
                <label class="form-label">Endere√ßo de Entrega:</label>
                <input type="text" class="form-control" id="deliveryAddress" placeholder="Rua, n√∫mero, bairro">
                <input type="text" class="form-control" id="deliveryReference" placeholder="Ponto de refer√™ncia (opcional)" style="margin-top: 10px;">
                <div class="selection-hint">Apenas o endere√ßo √© obrigat√≥rio. A refer√™ncia √© opcional. PARA ENTREGAS EM SANTA QUIT√âRIA E NOVA ESMERALDAS CHECAR DISPONIBILIDADE</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Forma de Pagamento:</label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="paymentMethod" value="cartao" checked>
                        Cart√£o
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="paymentMethod" value="dinheiro">
                        Dinheiro
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="paymentMethod" value="pix">
                        PIX
                    </label>
                </div>
            </div>
            
            <div class="form-group hidden" id="changeGroup">
                <label class="form-label">Precisa de troco? Se sim, para quanto?</label>
                <input type="text" class="form-control" id="changeFor" placeholder="Ex: R$ 50,00">
            </div>

            <!-- NOVO CAMPO: Observa√ß√µes -->
            <div class="form-group">
                <label class="form-label">Observa√ß√µes (opcional):</label>
                <textarea class="textarea-control" id="observations" placeholder="Ex: sem cebola, sem piment√£o, ponto da massa..."></textarea>
                <div class="selection-hint">Informe aqui qualquer observa√ß√£o especial sobre seu pedido</div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="backToStep4">Voltar</button>
                <button class="btn" id="nextToStep6">Pr√≥ximo</button>
            </div>
        </div>
        
        <!-- Passo 6: Resumo e Finaliza√ß√£o -->
        <div class="step-section" id="section6">
            <h2 class="section-title">Resumo do Pedido</h2>
            <p>Revise seu pedido e finalize pelo WhatsApp:</p>
            
            <div class="order-summary">
                <div class="order-items" id="orderItems">
                    <!-- Itens do pedido ser√£o adicionados aqui -->
                </div>
                <div class="order-total">
                    <span>Total:</span>
                    <span id="orderTotal">R$ 0,00</span>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="backToStep5">Voltar</button>
                <button class="btn btn-whatsapp" id="finalizeOrder">
                    <span>Finalizar Pedido pelo WhatsApp</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Rodap√© com cr√©ditos -->
    <div class="footer">
        Desenvolvido por <strong>AMX Labs</strong>
    </div>

    <!-- Modal para WhatsApp -->
    <div class="whatsapp-modal" id="whatsappModal">
        <div class="modal-content">
            <h3 class="modal-title">Abrir WhatsApp</h3>
            <p>Seu pedido est√° pronto! Clique no bot√£o abaixo para abrir o WhatsApp e enviar seu pedido.</p>
            <p><small>Se o WhatsApp n√£o abrir automaticamente, copie a mensagem e cole manualmente.</small></p>
            
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="closeModal">Fechar</button>
                <button class="btn btn-whatsapp" id="openWhatsApp">
                    <span>Abrir WhatsApp</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dados do card√°pio
        const menu = [
            { name: "√Ä moda Chal√©", ingredients: "Mussarela, calabresa, presunto, azeitona verde, cebola e piment√£o" },
            { name: "√Ä moda Esmeraldas", ingredients: "Mussarela, salaminho, presunto, champignon, azeitona verde e manjeric√£o" },
            { name: "Portuguesa", ingredients: "Mussarela, calabresa, presunto, bacon, ovo, azeitona preta e tomate" },
            { name: "Frango", ingredients: "Mussarela, frango desfiado e molho bolonhesa" },
            { name: "Frango Catupiry", ingredients: "Mussarela, frango desfiado e catupiry" },
            { name: "Palmito", ingredients: "Mussarela, palmito e molho bolonhesa" },
            { name: "4 Queijos", ingredients: "Mussarela, catupiry, provolone e gorgonzola" },
            { name: "Vegetariana", ingredients: "Mussarela, palmito, milho verde, azeitona verde, tomate, cebola e piment√£o" },
            { name: "Lombo Canadense", ingredients: "Mussarela e lombo canadense" },
            { name: "Presunto", ingredients: "Mussarela e presunto" },
            { name: "Presunto Especial", ingredients: "Mussarela, presunto, bacon, milho verde e tomate" },
            { name: "Calabresa", ingredients: "Mussarela e calabresa" },
            { name: "Atum", ingredients: "Mussarela, atum, tomate e salsa" },
            { name: "Bacon", ingredients: "Mussarela, bacon, ovo e tomate" },
            { name: "Nordestina", ingredients: "Mussarela, carne de sol, cebola roxa e catupiry" },
            { name: "Marguerita", ingredients: "Mussarela, tomate e manjeric√£o" },
            { name: "Banana", ingredients: "Mussarela, banana e canela" }
        ];

        // Pre√ßos da borda por tamanho
        const bordaPrices = {
            "PP": 0,
            "M": 8.00,
            "G": 10.00,
            "GG": 15.00
        };

        // Estado do pedido
        let order = {
            size: null,
            sizePrice: 0,
            pizzas: [],
            borda: { type: "normal", price: 0 },
            refrigerantes: [],
            customerInfo: {
                name: "",
                orderType: "retirada",
                address: "",
                reference: "",
                paymentMethod: "cartao",
                changeFor: "",
                observations: "" // NOVO CAMPO: observa√ß√µes
            },
            total: 0
        };

        let currentPizzaCount = 1;
        let whatsappURL = '';

        // Elementos DOM
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const step4 = document.getElementById('step4');
        const step5 = document.getElementById('step5');
        const step6 = document.getElementById('step6');
        
        const section1 = document.getElementById('section1');
        const section2 = document.getElementById('section2');
        const section3 = document.getElementById('section3');
        const section4 = document.getElementById('section4');
        const section5 = document.getElementById('section5');
        const section6 = document.getElementById('section6');
        
        const pizzaCountEl = document.getElementById('pizzaCount');
        const pizzaSelectionArea = document.getElementById('pizzaSelectionArea');
        const refriSelectionArea = document.getElementById('refriSelectionArea');
        const orderItemsEl = document.getElementById('orderItems');
        const orderTotalEl = document.getElementById('orderTotal');
        const currentTotalValue = document.getElementById('currentTotalValue');
        const bordaOptionsEl = document.getElementById('bordaOptions');
        const pizzaError = document.getElementById('pizzaError');
        
        const customerNameEl = document.getElementById('customerName');
        const deliveryAddressGroup = document.getElementById('deliveryAddressGroup');
        const deliveryFeeNote = document.getElementById('deliveryFeeNote');
        const changeGroup = document.getElementById('changeGroup');
        const changeForEl = document.getElementById('changeFor');
        const observationsEl = document.getElementById('observations'); // NOVO ELEMENTO

        // Navega√ß√£o entre passos
        document.getElementById('nextToStep2').addEventListener('click', function() {
            if (!order.size) {
                alert('Por favor, selecione um tamanho para a pizza.');
                return;
            }
            
            goToStep(2);
            renderPizzaSelection();
        });
        
        document.getElementById('backToStep1').addEventListener('click', function() {
            goToStep(1);
        });
        
        document.getElementById('nextToStep3').addEventListener('click', function() {
            // VALIDA√á√ÉO MELHORADA: Verificar se todas as pizzas t√™m sabores selecionados corretamente
            let allPizzasValid = true;
            
            for (let i = 0; i < order.pizzas.length; i++) {
                const pizza = order.pizzas[i];
                
                if (pizza.type === 'whole' && !pizza.whole) {
                    allPizzasValid = false;
                    break;
                } else if (pizza.type === 'half' && (!pizza.half1 || !pizza.half2)) {
                    allPizzasValid = false;
                    break;
                } else if (pizza.type === 'half' && pizza.half1 && pizza.half2 && pizza.half1.name === pizza.half2.name) {
                    allPizzasValid = false;
                    break;
                }
            }
            
            if (!allPizzasValid) {
                pizzaError.style.display = 'block';
                pizzaError.scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            pizzaError.style.display = 'none';
            goToStep(3);
            renderBordaOptions();
        });
        
        document.getElementById('backToStep2').addEventListener('click', function() {
            goToStep(2);
        });
        
        document.getElementById('nextToStep4').addEventListener('click', function() {
            if (!order.borda.type) {
                alert('Por favor, selecione um tipo de borda.');
                return;
            }
            
            goToStep(4);
            renderRefriSelection();
        });
        
        document.getElementById('backToStep3').addEventListener('click', function() {
            goToStep(3);
        });
        
        document.getElementById('nextToStep5').addEventListener('click', function() {
            goToStep(5);
            updateCurrentTotal();
        });
        
        document.getElementById('backToStep4').addEventListener('click', function() {
            goToStep(4);
        });
        
        document.getElementById('nextToStep6').addEventListener('click', function() {
            if (!customerNameEl.value.trim()) {
                alert('Por favor, informe seu nome.');
                return;
            }
            
            // MELHORIA: Refer√™ncia n√£o √© mais obrigat√≥ria, apenas endere√ßo
            if (order.customerInfo.orderType === 'entrega' && 
                !document.getElementById('deliveryAddress').value.trim()) {
                alert('Por favor, preencha o endere√ßo para entrega.');
                return;
            }
            
            if (order.customerInfo.paymentMethod === 'dinheiro' && 
                !changeForEl.value.trim()) {
                alert('Por favor, informe para quanto precisa de troco.');
                return;
            }
            
            // Salvar informa√ß√µes do cliente
            order.customerInfo.name = customerNameEl.value.trim();
            order.customerInfo.address = document.getElementById('deliveryAddress').value.trim();
            order.customerInfo.reference = document.getElementById('deliveryReference').value.trim();
            order.customerInfo.changeFor = changeForEl.value.trim();
            order.customerInfo.observations = observationsEl.value.trim(); // SALVAR OBSERVA√á√ïES
            
            goToStep(6);
            renderOrderSummary();
        });
        
        document.getElementById('backToStep5').addEventListener('click', function() {
            goToStep(5);
        });
        
        // Controle de quantidade de pizzas
        document.getElementById('increasePizza').addEventListener('click', function() {
            currentPizzaCount++;
            pizzaCountEl.textContent = currentPizzaCount;
            renderPizzaSelection();
        });
        
        document.getElementById('decreasePizza').addEventListener('click', function() {
            if (currentPizzaCount > 1) {
                currentPizzaCount--;
                pizzaCountEl.textContent = currentPizzaCount;
                renderPizzaSelection();
            }
        });
        
        // Sele√ß√£o de tamanho
        document.querySelectorAll('.size-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.size-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                this.classList.add('selected');
                
                order.size = this.getAttribute('data-size');
                order.sizePrice = parseFloat(this.getAttribute('data-price'));
                
                // Resetar borda quando mudar o tamanho
                order.borda = { type: "normal", price: 0 };
            });
        });
        
        // Controle de tipo de pedido (entrega/retirada)
        document.querySelectorAll('input[name="orderType"]').forEach(radio => {
            radio.addEventListener('change', function() {
                order.customerInfo.orderType = this.value;
                
                if (this.value === 'entrega') {
                    deliveryAddressGroup.classList.remove('hidden');
                    deliveryFeeNote.classList.remove('hidden');
                } else {
                    deliveryAddressGroup.classList.add('hidden');
                    deliveryFeeNote.classList.add('hidden');
                }
                
                updateCurrentTotal();
            });
        });
        
        // Controle de forma de pagamento
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', function() {
                order.customerInfo.paymentMethod = this.value;
                
                if (this.value === 'dinheiro') {
                    changeGroup.classList.remove('hidden');
                } else {
                    changeGroup.classList.add('hidden');
                }
            });
        });
        
        // MELHORIA: Sele√ß√£o de bebidas simplificada
        document.querySelectorAll('.refri-option').forEach(option => {
            option.addEventListener('click', function() {
                const refriName = this.getAttribute('data-name');
                const refriPrice = parseFloat(this.getAttribute('data-price'));
                
                // Se for "N√£o desejo bebidas", limpar todas as sele√ß√µes
                if (refriName === "N√£o desejo bebidas") {
                    order.refrigerantes = [];
                    document.querySelectorAll('.refri-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                } else {
                    // Remover sele√ß√£o de "N√£o desejo bebidas" se selecionar outra op√ß√£o
                    document.querySelectorAll('.refri-option.no-drink-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Verificar se j√° est√° selecionado
                    const existingIndex = order.refrigerantes.findIndex(r => r.name === refriName);
                    
                    if (existingIndex !== -1) {
                        // Remover se j√° estiver selecionado
                        order.refrigerantes.splice(existingIndex, 1);
                        this.classList.remove('selected');
                    } else {
                        // Adicionar se n√£o estiver selecionado
                        order.refrigerantes.push({ name: refriName, price: refriPrice });
                        this.classList.add('selected');
                    }
                }
                
                renderRefriSelection();
                updateCurrentTotal();
            });
        });
        
        // Finalizar pedido
        document.getElementById('finalizeOrder').addEventListener('click', function() {
            if (order.pizzas.length === 0) {
                alert('Por favor, complete seu pedido antes de finalizar.');
                return;
            }
            
            // Formatar mensagem para o WhatsApp
            let message = `*PEDIDO - PIZZARIA CHAL√â*\n\n`;
            message += `*Cliente:* ${order.customerInfo.name}\n`;
            message += `*Tipo:* ${order.customerInfo.orderType === 'retirada' ? 'Retirada' : 'Entrega'}\n`;
            
            if (order.customerInfo.orderType === 'entrega') {
                message += `*Endere√ßo:* ${order.customerInfo.address}\n`;
                if (order.customerInfo.reference) {
                    message += `*Refer√™ncia:* ${order.customerInfo.reference}\n`;
                }
            }
            
            message += `*Pagamento:* ${getPaymentMethodText(order.customerInfo.paymentMethod)}\n`;
            
            if (order.customerInfo.paymentMethod === 'dinheiro') {
                message += `*Troco para:* ${order.customerInfo.changeFor}\n`;
            }
            
            message += `\n*Detalhes do Pedido:*\n`;
            message += `*Tamanho:* ${order.size}\n`;
            // MELHORIA: Alterado para "Borda Recheada (Catupiry)"
            message += `*Borda:* ${order.borda.type === 'normal' ? 'Normal' : 'Recheada (Catupiry)'}${order.borda.price > 0 ? ` (+R$ ${order.borda.price.toFixed(2).replace('.', ',')})` : ''}\n\n`;
            message += `*Pizzas:*\n`;
            
            order.pizzas.forEach((pizza, index) => {
                message += `${index + 1}. `;
                if (pizza.type === 'whole' && pizza.whole) {
                    message += `Inteira de ${pizza.whole.name}\n`;
                } else if (pizza.type === 'half' && pizza.half1 && pizza.half2) {
                    message += `Metade ${pizza.half1.name} / Metade ${pizza.half2.name}\n`;
                }
            });
            
            if (order.refrigerantes.length > 0 && order.refrigerantes[0].name !== "N√£o desejo bebidas") {
                message += `\n*Bebidas:*\n`;
                order.refrigerantes.forEach(refri => {
                    message += `‚Ä¢ ${refri.name} - R$ ${refri.price.toFixed(2).replace('.', ',')}\n`;
                });
            }

            // NOVO: Adicionar observa√ß√µes se existirem
            if (order.customerInfo.observations) {
                message += `\n*Observa√ß√µes:*\n`;
                message += `${order.customerInfo.observations}\n`;
            }
            
            message += `\n*Total: R$ ${order.total.toFixed(2).replace('.', ',')}*\n\n`;
            // MELHORIA: Adicionar "Aguarde confirma√ß√£o do pedido" em negrito
            message += `*Aguarde confirma√ß√£o do pedido!*\n\n`;
        
            
            // Criar link do WhatsApp
            const whatsappNumber = "5531992382944";
            whatsappURL = `https://api.whatsapp.com/send?phone=${whatsappNumber}&text=${encodeURIComponent(message)}`;
            
            // Mostrar modal
            document.getElementById('whatsappModal').classList.add('active');
        });

        // Abrir WhatsApp quando clicar no bot√£o do modal
        document.getElementById('openWhatsApp').addEventListener('click', function() {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            
            if (isIOS) {
                window.location.href = whatsappURL;
            } else {
                window.open(whatsappURL, '_blank');
            }
            
            setTimeout(() => {
                document.getElementById('whatsappModal').classList.remove('active');
            }, 2000);
        });

        // Fechar modal
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('whatsappModal').classList.remove('active');
        });

        // Fun√ß√µes auxiliares
        function goToStep(step) {
            // Esconder todas as se√ß√µes
            section1.classList.remove('active');
            section2.classList.remove('active');
            section3.classList.remove('active');
            section4.classList.remove('active');
            section5.classList.remove('active');
            section6.classList.remove('active');
            
            // Remover estado ativo de todos os passos
            step1.classList.remove('active', 'completed');
            step2.classList.remove('active', 'completed');
            step3.classList.remove('active', 'completed');
            step4.classList.remove('active', 'completed');
            step5.classList.remove('active', 'completed');
            step6.classList.remove('active', 'completed');
            
            // Ativar se√ß√£o e passo correspondentes
            if (step === 1) {
                section1.classList.add('active');
                step1.classList.add('active');
            } else if (step === 2) {
                section2.classList.add('active');
                step1.classList.add('completed');
                step2.classList.add('active');
            } else if (step === 3) {
                section3.classList.add('active');
                step1.classList.add('completed');
                step2.classList.add('completed');
                step3.classList.add('active');
            } else if (step === 4) {
                section4.classList.add('active');
                step1.classList.add('completed');
                step2.classList.add('completed');
                step3.classList.add('completed');
                step4.classList.add('active');
            } else if (step === 5) {
                section5.classList.add('active');
                step1.classList.add('completed');
                step2.classList.add('completed');
                step3.classList.add('completed');
                step4.classList.add('completed');
                step5.classList.add('active');
            } else if (step === 6) {
                section6.classList.add('active');
                step1.classList.add('completed');
                step2.classList.add('completed');
                step3.classList.add('completed');
                step4.classList.add('completed');
                step5.classList.add('completed');
                step6.classList.add('active');
            }
        }
        
        function renderPizzaSelection() {
            pizzaSelectionArea.innerHTML = '';
            order.pizzas = [];
            
            for (let i = 0; i < currentPizzaCount; i++) {
                const pizzaSelection = document.createElement('div');
                pizzaSelection.className = 'pizza-selection';
                pizzaSelection.innerHTML = `
                    <h3 style="margin: 20px 0 10px; color: var(--primary);">Pizza ${i+1}</h3>
                    <div class="selection-hint">${i === 0 ? 'Selecione o tipo e os sabores da pizza' : ''}</div>
                    <div class="pizza-type-selector">
                        <div class="type-option" data-type="whole" data-pizza="${i}">
                            Pizza Inteira
                        </div>
                        <div class="type-option" data-type="half" data-pizza="${i}">
                            Meio a Meio
                        </div>
                    </div>
                    <div class="whole-pizza-container hidden" id="wholePizza${i}">
                        <div class="whole-pizza-title">Sabor Inteiro</div>
                        <div class="selected-pizza-name" id="wholePizzaName${i}">Clique para selecionar</div>
                        <div class="selection-hint">Selecione 1 sabor para a pizza inteira</div>
                    </div>
                    <div class="half-pizza-container hidden" id="halfPizza${i}">
                        <div class="half-pizza" data-half="1" data-pizza="${i}">
                            <div class="half-pizza-title">Metade 1</div>
                            <div class="selected-pizza-name" id="pizza${i}half1">Clique para selecionar</div>
                        </div>
                        <div class="half-pizza" data-half="2" data-pizza="${i}">
                            <div class="half-pizza-title">Metade 2</div>
                            <div class="selected-pizza-name" id="pizza${i}half2">Clique para selecionar</div>
                        </div>
                        <div class="selection-hint" style="padding: 10px; text-align: center;">Selecione 2 sabores diferentes para as metades</div>
                    </div>
                `;
                
                pizzaSelectionArea.appendChild(pizzaSelection);
                
                // Inicializar pizza no pedido
                order.pizzas.push({ 
                    type: 'whole',
                    whole: null,
                    half1: null,
                    half2: null
                });
            }
            
            // Adicionar eventos para sele√ß√£o de tipo
            document.querySelectorAll('.type-option').forEach(option => {
                option.addEventListener('click', function() {
                    const pizzaIndex = parseInt(this.getAttribute('data-pizza'));
                    const type = this.getAttribute('data-type');
                    
                    // Atualizar tipo da pizza
                    order.pizzas[pizzaIndex].type = type;
                    
                    // Atualizar interface
                    const wholeContainer = document.getElementById(`wholePizza${pizzaIndex}`);
                    const halfContainer = document.getElementById(`halfPizza${pizzaIndex}`);
                    
                    if (type === 'whole') {
                        wholeContainer.classList.remove('hidden');
                        halfContainer.classList.add('hidden');
                        this.classList.add('selected');
                        this.nextElementSibling.classList.remove('selected');
                    } else {
                        wholeContainer.classList.add('hidden');
                        halfContainer.classList.remove('hidden');
                        this.classList.add('selected');
                        this.previousElementSibling.classList.remove('selected');
                    }
                });
            });
            
            // Adicionar eventos de clique para sele√ß√£o de sabores
            document.querySelectorAll('.whole-pizza-container').forEach(container => {
                container.addEventListener('click', function() {
                    const pizzaIndex = parseInt(this.id.replace('wholePizza', ''));
                    showPizzaSelectionModal(pizzaIndex, 'whole');
                });
            });
            
            document.querySelectorAll('.half-pizza').forEach(half => {
                half.addEventListener('click', function() {
                    const pizzaIndex = parseInt(this.getAttribute('data-pizza'));
                    const halfNum = parseInt(this.getAttribute('data-half'));
                    showPizzaSelectionModal(pizzaIndex, 'half', halfNum);
                });
            });
            
            // Selecionar primeira op√ß√£o por padr√£o
            document.querySelectorAll('.type-option[data-type="whole"]').forEach(option => {
                option.click();
            });
        }
        
        function renderBordaOptions() {
            bordaOptionsEl.innerHTML = '';
            
            const selectedSize = order.size;
            const bordaPrice = bordaPrices[selectedSize];
            
            // Op√ß√£o de borda normal (sempre dispon√≠vel)
            const normalOption = document.createElement('div');
            normalOption.className = `borda-option ${order.borda.type === 'normal' ? 'selected' : ''}`;
            normalOption.setAttribute('data-type', 'normal');
            normalOption.setAttribute('data-price', '0.00');
            normalOption.innerHTML = `
                <span class="borda-label">Borda Normal</span>
                <div class="borda-price">Sem custo adicional</div>
            `;
            bordaOptionsEl.appendChild(normalOption);
            
            // Op√ß√£o de borda recheada (se dispon√≠vel para o tamanho)
            if (bordaPrice > 0) {
                const recheadaOption = document.createElement('div');
                recheadaOption.className = `borda-option ${order.borda.type === 'recheada' ? 'selected' : ''}`;
                recheadaOption.setAttribute('data-type', 'recheada');
                recheadaOption.setAttribute('data-price', bordaPrice.toFixed(2));
                // MELHORIA: Alterado para "Borda Recheada (Catupiry)"
                recheadaOption.innerHTML = `
                    <span class="borda-label">Borda Recheada (Catupiry)</span>
                    <div class="borda-price">R$ ${bordaPrice.toFixed(2).replace('.', ',')}</div>
                `;
                bordaOptionsEl.appendChild(recheadaOption);
            }
            
            // Adicionar eventos de clique para as op√ß√µes de borda
            bordaOptionsEl.querySelectorAll('.borda-option').forEach(option => {
                option.addEventListener('click', function() {
                    bordaOptionsEl.querySelectorAll('.borda-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    this.classList.add('selected');
                    
                    order.borda.type = this.getAttribute('data-type');
                    order.borda.price = parseFloat(this.getAttribute('data-price'));
                    updateCurrentTotal();
                });
            });
        }
        
        function renderRefriSelection() {
            refriSelectionArea.innerHTML = '';
            
            if (order.refrigerantes.length === 0 || order.refrigerantes[0].name === "N√£o desejo bebidas") {
                refriSelectionArea.innerHTML = '<p style="text-align: center; color: #666; margin: 20px 0;">Nenhuma bebida selecionada</p>';
                return;
            }
            
            const refriList = document.createElement('div');
            refriList.innerHTML = '<h3 style="margin: 20px 0 10px; color: var(--primary);">Bebidas Selecionadas:</h3>';
            
            order.refrigerantes.forEach(refri => {
                const refriItem = document.createElement('div');
                refriItem.className = 'order-item';
                refriItem.innerHTML = `
                    <div class="order-item-details">
                        <div class="order-item-name">${refri.name}</div>
                    </div>
                    <div class="order-item-price">R$ ${refri.price.toFixed(2).replace('.', ',')}</div>
                `;
                refriList.appendChild(refriItem);
            });
            
            refriSelectionArea.appendChild(refriList);
        }
        
        function updateCurrentTotal() {
            let total = 0;
            
            // Adicionar pre√ßo das pizzas
            total += order.sizePrice * currentPizzaCount;
            
            // Adicionar borda recheada (se selecionada)
            total += order.borda.price * currentPizzaCount;
            
            // Adicionar refrigerantes (exceto "N√£o desejo bebidas")
            order.refrigerantes.forEach(refri => {
                if (refri.name !== "N√£o desejo bebidas") {
                    total += refri.price;
                }
            });
            
            // Adicionar taxa de entrega se for o caso
            if (order.customerInfo.orderType === 'entrega') {
                total += 5;
            }
            
            currentTotalValue.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
        }
        
        function showPizzaSelectionModal(pizzaIndex, type, halfNum = null) {
            // Criar modal de sele√ß√£o de sabores
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.backgroundColor = 'rgba(0,0,0,0.7)';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            modal.style.zIndex = '1000';
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 10px; padding: 20px; max-width: 90%; max-height: 90%; overflow-y: auto; width: 600px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Selecione um sabor</h3>
                    <div class="pizza-grid">
                        ${menu.map(pizza => `
                            <div class="pizza-item" data-name="${pizza.name}">
                                <div class="pizza-name">${pizza.name}</div>
                                <div class="pizza-ingredients">${pizza.ingredients}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="text-align: right; margin-top: 20px;">
                        <button class="btn btn-secondary" id="closeModal">Cancelar</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Adicionar eventos para os itens do modal
            modal.querySelectorAll('.pizza-item').forEach(item => {
                item.addEventListener('click', function() {
                    const pizzaName = this.getAttribute('data-name');
                    const pizza = menu.find(p => p.name === pizzaName);
                    
                    // Atualizar a pizza no pedido
                    if (type === 'whole') {
                        order.pizzas[pizzaIndex].whole = pizza;
                        document.getElementById(`wholePizzaName${pizzaIndex}`).textContent = pizzaName;
                    } else if (type === 'half') {
                        if (halfNum === 1) {
                            order.pizzas[pizzaIndex].half1 = pizza;
                            document.getElementById(`pizza${pizzaIndex}half1`).textContent = pizzaName;
                        } else {
                            order.pizzas[pizzaIndex].half2 = pizza;
                            document.getElementById(`pizza${pizzaIndex}half2`).textContent = pizzaName;
                        }
                        
                        // VALIDA√á√ÉO: Verificar se os dois sabores s√£o iguais
                        if (order.pizzas[pizzaIndex].half1 && order.pizzas[pizzaIndex].half2 && 
                            order.pizzas[pizzaIndex].half1.name === order.pizzas[pizzaIndex].half2.name) {
                            alert('Por favor, selecione sabores diferentes para as duas metades.');
                            return;
                        }
                    }
                    
                    // Fechar o modal
                    document.body.removeChild(modal);
                });
            });
            
            // Fechar modal
            modal.querySelector('#closeModal').addEventListener('click', function() {
                document.body.removeChild(modal);
            });
        }
        
        function renderOrderSummary() {
            orderItemsEl.innerHTML = '';
            order.total = 0;
            
            // Adicionar tamanho e borda
            const sizeItem = document.createElement('div');
            sizeItem.className = 'order-item';
            sizeItem.innerHTML = `
                <div class="order-item-details">
                    <div class="order-item-name">Pizza ${order.size}</div>
                </div>
                <div class="order-item-price">R$ ${order.sizePrice.toFixed(2).replace('.', ',')}</div>
            `;
            orderItemsEl.appendChild(sizeItem);
            order.total += order.sizePrice;
            
            // Adicionar borda se for recheada
            if (order.borda.type === 'recheada') {
                const bordaItem = document.createElement('div');
                bordaItem.className = 'order-item';
                // MELHORIA: Alterado para "Borda Recheada (Catupiry)"
                bordaItem.innerHTML = `
                    <div class="order-item-details">
                        <div class="order-item-name">Borda Recheada (Catupiry)</div>
                    </div>
                    <div class="order-item-price">R$ ${order.borda.price.toFixed(2).replace('.', ',')}</div>
                `;
                orderItemsEl.appendChild(bordaItem);
                order.total += order.borda.price;
            }
            
            // Adicionar refrigerantes (exceto "N√£o desejo bebidas")
            order.refrigerantes.forEach(refri => {
                if (refri.name !== "N√£o desejo bebidas") {
                    const refriItem = document.createElement('div');
                    refriItem.className = 'order-item';
                    refriItem.innerHTML = `
                        <div class="order-item-details">
                            <div class="order-item-name">${refri.name}</div>
                        </div>
                        <div class="order-item-price">R$ ${refri.price.toFixed(2).replace('.', ',')}</div>
                    `;
                    orderItemsEl.appendChild(refriItem);
                    order.total += refri.price;
                }
            });
            
            // Adicionar taxa de entrega se for o caso
            if (order.customerInfo.orderType === 'entrega') {
                const deliveryItem = document.createElement('div');
                deliveryItem.className = 'order-item';
                deliveryItem.innerHTML = `
                    <div class="order-item-details">
                        <div class="order-item-name">Taxa de Entrega</div>
                    </div>
                    <div class="order-item-price">R$ 5,00</div>
                `;
                orderItemsEl.appendChild(deliveryItem);
                order.total += 5;
            }
            
            // Adicionar pizzas
            order.pizzas.forEach((pizza, index) => {
                const pizzaItem = document.createElement('div');
                pizzaItem.className = 'order-item';
                
                let pizzaDesc = '';
                if (pizza.type === 'whole' && pizza.whole) {
                    pizzaDesc = `Inteira de ${pizza.whole.name}`;
                } else if (pizza.type === 'half' && pizza.half1 && pizza.half2) {
                    pizzaDesc = `Metade ${pizza.half1.name} / Metade ${pizza.half2.name}`;
                } else {
                    pizzaDesc = 'Sabor n√£o selecionado';
                }
                
                pizzaItem.innerHTML = `
                    <div class="order-item-details">
                        <div class="order-item-name">Pizza ${index + 1}</div>
                        <div class="order-item-desc">${pizzaDesc}</div>
                    </div>
                    <div class="order-item-price">-</div>
                `;
                
                orderItemsEl.appendChild(pizzaItem);
            });

            // NOVO: Adicionar observa√ß√µes se existirem
            if (order.customerInfo.observations) {
                const observationsItem = document.createElement('div');
                observationsItem.className = 'order-item';
                observationsItem.innerHTML = `
                    <div class="order-item-details">
                        <div class="order-item-name">Observa√ß√µes</div>
                        <div class="order-item-desc">${order.customerInfo.observations}</div>
                    </div>
                    <div class="order-item-price">-</div>
                `;
                orderItemsEl.appendChild(observationsItem);
            }
            
            // Multiplicar pelo n√∫mero de pizzas
            order.total *= currentPizzaCount;
            
            orderTotalEl.textContent = `R$ ${order.total.toFixed(2).replace('.', ',')}`;
        }
        
        function getPaymentMethodText(method) {
            switch(method) {
                case 'dinheiro': return 'Dinheiro';
                case 'cartao': return 'Cart√£o';
                case 'pix': return 'PIX';
                default: return method;
            }
        }
    </script>
</body>
</html>



